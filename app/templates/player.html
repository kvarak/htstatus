{% extends 'base.html' %}

{% block content %}

<div class="container">
  <div class="row">
    <div class="col-sm">
      <div class="jumbotron">
        <div class="container">
          <h1 class="display-4">{{ title }}</h1>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm">
      <div class="card-deck">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Players</h5>
            <p class="card-text">
              <table class="table table-sm table-scroll sortable">
                <thead>
                  <tr>
                    <th scope="col" class="text-small">Nr</th>
                    <th scope="col" class="text-small">Country</th>
                    <th scope="col" class="text-small">Name</th>
                    <th scope="col" class="text-small">Age</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">STA</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">KEEP</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">DEF</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">PM</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">WING</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">PS</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">SC</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">SP</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">XP</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">FORM</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">CRDS</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">INJ</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">LOY</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">TSI</th>
                    <th scope="col" class="text-small"></th>
                    <th scope="col" class="text-small">Comparison</th>
                  </tr>
                </thead>
                <tbody>
                  {% for p in players %}
                  <tr>
                    {% if p.number == 100 %}
                    <td class="text-small">-</td>
                    {% else %}
                    <td class="text-small">{{ p.number }}</td>
                    {% endif %}
                    <td class="text-small">{{ p.country }}</td>
                    <th class="text-small" scope="row">{{ p.first_name }} {{ p.last_name }}</th>

                    <td class="text-small" align="right">{{ p.age_years }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].age_years < p.age_years %}
                        (+{{ p.age_years - players_oldest[p.ht_id].age_years  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.stamina }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].stamina < p.stamina %}
                        (+{{ p.stamina - players_oldest[p.ht_id].stamina  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].stamina > p.stamina %}
                        ({{ p.stamina - players_oldest[p.ht_id].stamina  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.keeper }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].keeper < p.keeper %}
                        (+{{ p.keeper - players_oldest[p.ht_id].keeper  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].keeper > p.keeper %}
                        ({{ p.keeper - players_oldest[p.ht_id].keeper  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.defender }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].defender < p.defender %}
                        (+{{ p.defender - players_oldest[p.ht_id].defender  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].defender > p.defender %}
                        ({{ p.defender - players_oldest[p.ht_id].defender  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.playmaker }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].playmaker < p.playmaker %}
                        (+{{ p.playmaker - players_oldest[p.ht_id].playmaker  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].playmaker > p.playmaker %}
                        ({{ p.playmaker - players_oldest[p.ht_id].playmaker  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.winger }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].winger < p.winger %}
                        (+{{ p.winger - players_oldest[p.ht_id].winger  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].winger > p.winger %}
                        ({{ p.winger - players_oldest[p.ht_id].winger  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.passing }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].passing < p.passing %}
                        (+{{ p.passing - players_oldest[p.ht_id].passing  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].passing > p.passing %}
                        ({{ p.passing - players_oldest[p.ht_id].passing  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.scorer }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].scorer < p.scorer %}
                        (+{{ p.scorer - players_oldest[p.ht_id].scorer  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].scorer > p.scorer %}
                        ({{ p.scorer - players_oldest[p.ht_id].scorer  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.set_pieces }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].set_pieces < p.set_pieces %}
                        (+{{ p.set_pieces - players_oldest[p.ht_id].set_pieces  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].set_pieces > p.set_pieces %}
                        ({{ p.set_pieces - players_oldest[p.ht_id].set_pieces  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.experience }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].experience < p.experience %}
                        (+{{ p.experience - players_oldest[p.ht_id].experience  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.form }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].form < p.form %}
                        (+{{ p.form - players_oldest[p.ht_id].form  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].form > p.form %}
                        ({{ p.form - players_oldest[p.ht_id].form  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.cards }}</td>
                    <td class="text-small">&nbsp;</td>

                    <td class="text-small" align="right">{{ p.injury_level }}</td>
                    <td class="text-small">&nbsp;</td>

                    <td class="text-small" align="right">{{ p.loyalty }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].loyalty < p.loyalty %}
                        (+{{ p.loyalty - players_oldest[p.ht_id].loyalty  }})
                      {% endif %}
                    </td>

                    <td class="text-small" align="right">{{ p.tsi }}</td>
                    <td class="text-small">
                      {% if players_oldest[p.ht_id].tsi < p.tsi %}
                        (+{{ p.tsi - players_oldest[p.ht_id].tsi  }})
                      {% endif %}
                      {% if players_oldest[p.ht_id].tsi > p.tsi %}
                        ({{ p.tsi - players_oldest[p.ht_id].tsi  }})
                      {% endif %}
                    </td>

                    {% set olddate = players_oldest[p.ht_id].data_date | string() %}
                    {% set thedate = olddate[:10] %}
                    <td class="text-small" align="right">{{ thedate }}</td>

                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </p>
          </div>
          <div class="card-footer">
            <small class="text-muted">Last updated 3 mins ago</small>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm"><p></p>
    </div>
  </div>
</div>

{% endblock %}
